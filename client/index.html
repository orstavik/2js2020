<script type="module">
  import {UserData} from "./wc-app/UserData.js";

  customElements.define('user-data', UserData);
</script>

<h1>hello sunshine worker</h1>

<user-data></user-data>

<script>
  window.addEventListener('message', function (e) {
    if (e.origin === 'https://auth.2js.no') {    //todo do we need e.source !== loginWindow
      document.querySelector('user-data').setUserData(e.data); //update the user web comp
      !e.data && (location = location.href); //if it is logout, then reload
    }
  });
</script>